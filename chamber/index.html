<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Eniborah Chamber of Commerce | Home</title>

  <!-- Meta Description -->
  <meta name="description" content="The Eniborah Chamber of Commerce supports local businesses by connecting members, promoting growth, and creating opportunities that strengthen our community.">

  <!-- Meta Author -->
  <meta name="author" content="Lucky Ayei Inyang Eni">

  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="Eniborah Chamber of Commerce">
  <meta property="og:description" content="Discover events, resources, and opportunities for businesses in Eniborah. Join us in fostering growth and building a stronger community.">
  <meta property="og:image" content="images/chamber-og.jpg">
  <meta property="og:url" content="https://www.eniborahchamber.org/">
  <meta property="og:type" content="website">

  <!-- Stylesheets -->
  <link rel="stylesheet" href="styles/reset.css">
  <link rel="stylesheet" href="styles/styles.css">

  <!-- Favicon -->
  <link rel="icon" href="images/favicon.svg" type="image/svg+xml">
</head>
<body>
  <header class="site-header">
    <div class="brand">
      <a href="index.html" class="logo">
        <span class="logo-mark">TCC</span>
        <span class="brand-text">Eniborah Chamber</span>
      </a>
      <button id="navToggle" class="nav-toggle" aria-expanded="false">â˜°</button>
    </div>
    <nav id="primaryNav" class="primary-nav" aria-label="Primary">
      <ul>
        <li><a class="active" href="index.html">Home</a></li>
        <li><a href="discover.html">Discover</a></li>
        <li><a href="directory.html">Directory</a></li>
        <li><a href="join.html">Join</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="hero">
      <div class="hero-inner">
        <h1>Welcome to Eniborah Chamber of Commerce</h1>
        <p>Connecting businesses, fostering growth, and building community.</p>
        <a class="cta" href="join.html">Join the Chamber</a>

        <section class="events">
          <h2 class="visually-hidden">Upcoming Events</h2>
          <strong style="margin-right:.5rem">Upcoming:</strong>
          <span>Annual Business Expo â€” Oct 12, 2025</span>
          <span>â€¢</span>
          <span>Small Business Workshop â€” Nov 5, 2025</span>
        </section>
      </div>
    </section>

    <section style="padding:1rem;">
      <h2 class="visually-hidden">Chamber Highlights</h2>
      <div style="max-width:1200px;margin-inline:auto;display:grid;gap:1rem">
        <div style="display:grid;grid-template-columns:1fr;gap:1rem">
          <article>
            <h3>Local Events & News</h3>
            <p class="muted">Sign up for our newsletter to get updates about local events and member offers.</p>
          </article>

          <article>
            <h3>ðŸŒ¦ Weather in Lagos</h3>
            <div id="weatherBox" style="max-width:600px"></div>
          </article>

          <article>
            <h3>Member Spotlights</h3>
            <div id="spotlightContainer" class="spotlight-grid" aria-live="polite"></div>
          </article>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="footer-grid">
      <section>
        <h3>Contact</h3>
        <p>Email: info@eniborahchamber.org</p>
      </section>
      <section>
        <h3>About</h3>
        <p>Fostering business growth in Eniborah.</p>
      </section>
      <section class="dev-info">
        <h3>Developer</h3>
        <p>&copy;<span id="year"></span> Lucky Ayei Inyang Eni</p>
      </section>
    </div>
  </footer>

  <!-- JavaScript -->
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    // ----------------- SPOTLIGHTS -----------------
    const spotlightContainer = document.getElementById('spotlightContainer');

    function pickSpotlights(members) {
      const candidates = members.filter(m => m.membershipLevel === 2 || m.membershipLevel === 3);
      if (candidates.length === 0) return [];
      for (let i = candidates.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [candidates[i], candidates[j]] = [candidates[j], candidates[i]];
      }
      const count = Math.min(candidates.length, (Math.random() < 0.5 ? 2 : 3));
      return candidates.slice(0, count);
    }

    if (spotlightContainer) {
      fetch('members.json')
        .then(r => r.json())
        .then(members => {
          const spots = pickSpotlights(members);
          spotlightContainer.innerHTML = '';
          if (spots.length === 0) {
            spotlightContainer.innerHTML = '<p class="loading">No spotlight members available.</p>';
            return;
          }
          spots.forEach(m => {
            const el = document.createElement('article');
            el.className = 'spot-card';
            el.innerHTML = `
              <img class="logo" src="${m.logo || 'images/placeholder.png'}" alt="${m.name} logo" loading="lazy">
              <h4>${m.name}</h4>
              <p>${m.category} â€¢ ${m.address}</p>
              <p class="muted">${m.phone}</p>
              <div class="spot-actions">
                <a class="cta" href="${m.website}" target="_blank" rel="noopener">Visit</a>
                <span class="badge">${m.membershipLevel === 3 ? 'Gold' : 'Silver'}</span>
              </div>
            `;
            spotlightContainer.appendChild(el);
          });
        })
        .catch(err => {
          spotlightContainer.innerHTML = '<p class="loading">Could not load spotlights.</p>';
          console.error(err);
        });
    }

    // ----------------- WEATHER -----------------
    const OWM_API_KEY = "25a6c3a30d10acf7cb6a5758357bd427"; 
    const city = "Lagos";
    const weatherBox = document.getElementById('weatherBox');

    if (weatherBox) {
      if (!OWM_API_KEY) {
        weatherBox.innerHTML = `
          <p class="loading">Weather unavailable â€” add your OpenWeatherMap API key.</p>
        `;
        return;
      }

      const currentUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&units=metric&appid=${OWM_API_KEY}`;
      const forecastUrl = `https://api.openweathermap.org/data/2.5/forecast?q=${city}&units=metric&appid=${OWM_API_KEY}`;

      Promise.all([fetch(currentUrl), fetch(forecastUrl)])
        .then(async ([currRes, forecastRes]) => {
          if (!currRes.ok || !forecastRes.ok) throw new Error("Weather fetch failed");
          const currentData = await currRes.json();
          const forecastData = await forecastRes.json();

          const currTemp = Math.round(currentData.main.temp);
          const currDesc = currentData.weather[0].description;

          let html = `
            <p><strong>Current Temperature:</strong> ${currTemp}Â°C</p>
            <p><strong>Current Conditions:</strong> ${currDesc}</p>
            <h4>ðŸ“… 3-Day Forecast</h4>
            <ul>
          `;

          const forecastList = forecastData.list.filter(item => item.dt_txt.includes("12:00:00"));
          forecastList.slice(0, 3).forEach(item => {
            const date = new Date(item.dt * 1000);
            const dayName = date.toLocaleDateString(undefined, { weekday: 'long' });
            const temp = Math.round(item.main.temp);
            const desc = item.weather[0].main;
            html += `<li>${dayName}: ${temp}Â°C (${desc})</li>`;
          });

          html += "</ul>";
          weatherBox.innerHTML = html;
        })
        .catch(err => {
          console.error(err);
          weatherBox.innerHTML = `<p class="loading">Unable to load weather data.</p>`;
        });
    }
  });
  </script>
</body>
</html>